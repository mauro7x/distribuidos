{
  "ingestion": {
    "base": {
      "image": "dropper",
      "config": {
        "fields": ["extra", "drop_this", "thrash"]
      }
    },
    "input": [
      {
        "id": "msg_1",
        "data": "dni,first_name,last_name,age,extra,drop_this,thrash"
      }
    ],
    "output": [
      {
        "to": "name_registry",
        "msg_id": "msg_1"
      },
      {
        "to": "age_registry",
        "msg_id": "msg_1"
      }
    ]
  },
  "name_registry": {
    "input": [{ "id": "msg_1", "data": "dni,first_name,last_name" }],
    "output": [
      {
        "to": "joiner",
        "msg_id": "msg_1"
      }
    ]
  },
  "age_registry": {
    "input": [{ "id": "msg_1", "data": "dni,age" }],
    "output": [
      {
        "to": "joiner",
        "msg_id": "msg_2"
      }
    ]
  },
  "joiner": {
    "affinity_key": "dni",
    "input": [
      { "id": "msg_1", "data": "dni,fullname" },
      { "id": "msg_2", "data": "dni,age_in_months" }
    ],
    "output": []
  }
}
